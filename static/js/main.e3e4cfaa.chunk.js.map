{"version":3,"sources":["Commons.jsx","api.js","Home.jsx","Control.jsx","Vote.jsx","App.jsx","index.jsx"],"names":["Button","text","className","disabled","onClick","classes","push","join","baseUrl","httpBaseUri","NewSessionButton","choices","history","useHistory","onSuccess","fetch","method","body","JSON","stringify","then","res","status","headers","get","createSession","session","Home","Share","url","useParams","sessionId","navigator","clipboard","writeText","ControlButton","open","hasVotes","stopVote","resetVote","startVote","Result","participants","votes","inProgress","length","map","name","i","vote","ResultRow","markVoted","KickButton","kickParticipant","Control","useState","setSession","ws","useRef","setAnimated","useContext","LogoAnimationContext","useEffect","Promise","all","json","code","getSession","Open","current","WebSocket","close","onmessage","e","event","parse","data","Kind","Data","Participants","Votes","Object","keys","TextInput","value","autoFocus","onChange","onEnter","htmlFor","id","type","onKeyPress","key","JoinForm","defaultValue","onClickJoin","setValue","handleClick","target","Session","setChoices","selected","setSelected","enabled","setEnabled","reloadWs","setReloadWs","getChoices","Choices","newWs","onclose","cur","c","choice","VoteButton","Participant","Choice","Vote","setName","saveName","window","localStorage","setItem","onAlreadyJoined","getItem","createContext","Header","logoClasses","animate","to","App","animated","Provider","exact","path","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.e3e4cfaa.chunk.js","sourcesContent":["export const Button = ({ text, className, disabled, onClick }) => {\n  const classes = [\"big\"]\n  if (className) {\n    classes.push(className)\n  }\n\n  return (\n    <button onClick={onClick} className={classes.join(\" \")} disabled={disabled}>\n      {text}\n    </button>)\n}","export const baseUrl = \"api.pajthy.akarasz.me\"\nconst httpBaseUri = \"https://\" + baseUrl\n\nexport const createSession = (choices, onSuccess) => (\n  fetch(httpBaseUri, {\n    method: \"POST\",\n    body: JSON.stringify(choices),\n  })\n  .then(res => {\n    if (res.status === 201) {\n      onSuccess?.(res.headers.get(\"location\"))\n    } else {\n      throw res\n    }\n  }))\n\nexport const choices = (sessionId, onSuccess) => (\n  fetch(httpBaseUri + \"/\" + sessionId, {\n    method: \"GET\",\n  })\n  .then(res => Promise.all([res.status, res.json()]))\n  .then(([code, body]) => {\n    if (code === 200) {\n      onSuccess?.(body)\n    } else {\n      throw (code, body)\n    }\n  }))\n\nexport const vote = (sessionId, name, choice, onSuccess) => (\n  fetch(httpBaseUri + \"/\" + sessionId, {\n    method: \"PUT\",\n    body: JSON.stringify({Participant: name, Choice: choice}),\n  })\n  .then(res => {\n    if (res.status === 202) {\n      onSuccess?.()\n    } else {\n      throw res\n    }\n  }))\n\nexport const getSession = (sessionId, onSuccess) => (\n  fetch(httpBaseUri + \"/\" + sessionId + \"/control\", {\n    method: \"GET\",\n  })\n  .then(res => Promise.all([res.status, res.json()]))\n  .then(([code, body]) => {\n    if (code === 200) {\n      onSuccess?.(body)\n    } else {\n      throw (code, body)\n    }\n  }))\n\nexport const startVote = (sessionId, onSuccess) => (\n  fetch(httpBaseUri + \"/\" + sessionId + \"/control/start\", {\n    method: \"PATCH\",\n  })\n  .then(res => {\n    if (res.status === 202) {\n      onSuccess?.()\n    } else {\n      throw res\n    }\n  }))\n\nexport const stopVote = (sessionId, onSuccess) => (\n  fetch(httpBaseUri + \"/\" + sessionId + \"/control/stop\", {\n    method: \"PATCH\",\n  })\n  .then(res => {\n    if (res.status === 202) {\n      onSuccess?.()\n    } else {\n      throw res\n    }\n  }))\n\nexport const resetVote = (sessionId, onSuccess) => (\n  fetch(httpBaseUri + \"/\" + sessionId + \"/control/reset\", {\n    method: \"PATCH\",\n  })\n  .then(res => {\n    if (res.status === 202) {\n      onSuccess?.()\n    } else {\n      throw res\n    }\n  }))\n\nexport const kickParticipant = (sessionId, name, onSuccess) => (\n  fetch(httpBaseUri + \"/\" + sessionId + \"/control/kick\", {\n    method: \"PATCH\",\n    body: name,\n  })\n  .then(res => {\n    if (res.status === 204) {\n      onSuccess?.()\n    } else {\n      throw res\n    }\n  }))\n\nexport const join = (sessionId, name, onSuccess, onAlreadyJoined) => (\n  fetch(httpBaseUri + \"/\" + sessionId + \"/join\", {\n    method: \"PUT\",\n    body: name,\n  })\n  .then(res => {\n    if (res.status === 201) {\n      onSuccess?.()\n    } else if (res.status === 409) {\n      onAlreadyJoined?.()\n    } else {\n      throw res\n    }\n  }))\n","import { useHistory } from \"react-router-dom\"\n\nimport { Button } from \"./Commons.jsx\"\n\nimport { createSession } from \"./api.js\"\n\nconst NewSessionButton = ({ text, choices }) => {\n  const history = useHistory()\n\n  const handleClick = () => {\n    createSession(choices, (session) => history.push(session + \"/control\"))\n  }\n\n  return <Button text={text} onClick={handleClick} />\n}\n\nconst Home = () => (\n  <div className=\"content\">\n    <NewSessionButton text=\"Fibonacci\" choices={[\"1\", \"2\", \"3\", \"5\", \"8\", \"13\", \"?\"]} />\n    <NewSessionButton text=\"T-Shirt\" choices={[\"S\", \"M\", \"L\", \"?\"]} />\n    <NewSessionButton text=\"âœ‹\" choices={[\"ðŸ‘\", \"ðŸ‘Œ\", \"ðŸ¤·\", \"ðŸ‘Ž\", \"ðŸ–•\"]} />\n  </div>)\n\nexport default Home","import { useState, useEffect, useContext, useRef } from \"react\"\nimport { useParams } from \"react-router-dom\"\n\nimport { LogoAnimationContext } from \"./App.jsx\"\nimport { Button } from \"./Commons.jsx\"\n\nimport { getSession, startVote, stopVote, resetVote, kickParticipant } from \"./api.js\"\nimport { baseUrl } from \"./api.js\"\n\nconst Share = () => {\n  const { sessionId } = useParams()\n\n  const url = \"https://pajthy.com/\" + sessionId\n\n  const handleClick = () => {\n    navigator.clipboard\n      .writeText(url)\n  }\n\n  return (\n    <div className=\"share\">\n      <div className=\"link\">{url}</div>\n      <button onClick={handleClick}>Copy</button>\n    </div>)\n}\n\nconst ControlButton = ({ open, hasVotes }) => {\n  const { sessionId } = useParams()\n\n  if (open) {\n    return <Button text=\"STAHP!\" className=\"danger\" onClick={() => stopVote(sessionId)} />\n  }\n\n  if (hasVotes) {\n    return <Button text=\"Reset\" onClick={() => resetVote(sessionId)} />\n  }\n\n  return <Button text=\"Begin voting!\" onClick={() => startVote(sessionId)} />\n}\n\nconst Result = ({ participants, votes, inProgress }) => {\n  if (participants.length === 0) {\n    return null\n  }\n\n  return (\n    <table className=\"votes\">\n      <tbody>\n        {participants.map((name, i) =>\n          <ResultRow key={i} name={name} vote={votes[name]} inProgress={inProgress} />\n        )}\n      </tbody>\n    </table>)\n}\n\nconst ResultRow = ({ name, vote, inProgress }) => {\n  const markVoted = inProgress && vote\n\n  return (\n    <tr className={markVoted ? \"already-voted\" : null}>\n      <td>{name} <KickButton name={name} /></td>\n      <td>{inProgress ? null : vote}</td>\n    </tr>)\n}\n\nconst KickButton = ({ name }) => {\n  const { sessionId } = useParams()\n\n  return <span className=\"kick\" onClick={() => kickParticipant(sessionId, name)}>(X)</span>\n}\n\nconst Control = () => {\n  const [session, setSession] = useState(null)\n  const { sessionId } = useParams()\n  const ws = useRef(null)\n  const { setAnimated } = useContext(LogoAnimationContext)\n\n  useEffect(() => {\n    getSession(sessionId, (res) => {\n      setSession(res)\n      setAnimated(res.Open)\n    })\n  }, [sessionId, setAnimated])\n\n  useEffect(() => { // handle websocket creation\n    ws.current = new WebSocket(\"wss://\" + baseUrl + \"/\" + sessionId + \"/control/ws\")\n\n    return () => {\n      ws.current.close();\n    }\n  }, [sessionId, setAnimated])\n\n  useEffect(() => { // handle websocket onevent\n    if (!ws.current) {\n      return\n    }\n\n    ws.current.onmessage = (e) => {\n      const event = JSON.parse(e.data)\n\n      switch(event.Kind) {\n        case \"enabled\":\n          setAnimated(true)\n          break\n        case \"disabled\":\n        case \"reset\":\n          setAnimated(false)\n          break\n        default:\n          break\n      }\n\n      setSession(current => { return { ...current, ...event.Data } })\n    }\n  }, [sessionId, setAnimated])\n\n  if (!session) {\n    return null\n  }\n\n  const participants = session.Participants || []\n  const votes = session.Votes || {}\n\n  return (\n    <div className=\"admin content\">\n      <Share />\n      <ControlButton open={session.Open} hasVotes={(Object.keys(votes)).length > 0} />\n      <Result participants={participants} votes={votes} inProgress={session.Open} />\n    </div>)\n}\n\nexport default Control","import { useState, useEffect, useContext, useRef } from \"react\"\nimport { useParams } from \"react-router-dom\"\n\nimport { LogoAnimationContext } from \"./App.jsx\"\nimport { Button } from \"./Commons.jsx\"\n\nimport { join, choices as getChoices, vote } from \"./api.js\"\nimport { baseUrl } from \"./api.js\"\n\nconst TextInput = ({ name, value, autoFocus, onChange, onEnter }) => {\n  const handleKeyPress = (e) => {\n    if (e.key === \"Enter\") {\n      onEnter?.()\n    }\n  }\n\n  return (\n    <div className=\"pair\">\n      <label htmlFor={name}>{name}</label>\n      <input\n        id={name}\n        type=\"text\"\n        autoFocus={autoFocus}\n        value={value}\n        onChange={onChange}\n        onKeyPress={handleKeyPress} />\n\n    </div>)\n}\n\nconst JoinForm = ({ defaultValue, onClickJoin }) => {\n  const [value, setValue] = useState(defaultValue)\n\n  const handleChange = (e) => {\n    setValue(e.target.value)\n  }\n\n  const handleClick = () => {\n    onClickJoin(value)\n  }\n\n  return (<div className=\"content\">\n    <TextInput\n      name=\"Name\"\n      value={value}\n      onChange={handleChange}\n      onEnter={handleClick}\n      autoFocus />\n    <Button text=\"Join\" onClick={handleClick} />\n  </div>)\n}\n\nconst Session = ({ name }) => {\n  const [choices, setChoices] = useState([])\n  const [selected, setSelected] = useState(null)\n  const [enabled, setEnabled] = useState(false)\n  const { sessionId } = useParams()\n  const ws = useRef(null)\n  const [reloadWs, setReloadWs] = useState(false)\n  const { setAnimated } = useContext(LogoAnimationContext)\n\n  useEffect(() => {\n    getChoices(sessionId, (res) => {\n      setChoices(res.Choices)\n      setEnabled(res.Open)\n      setAnimated(res.Open)\n    })\n  }, [sessionId, setAnimated, reloadWs])\n\n  useEffect(() => { // handle websocket creation\n    const newWs = new WebSocket(\"wss://\" + baseUrl + \"/\" + sessionId + \"/ws\")\n    ws.current = newWs\n\n    return () => {\n      newWs.close();\n    }\n  }, [sessionId, reloadWs])\n\n  useEffect(() => { // handle websocket onevent\n    if (!ws.current) {\n      return\n    }\n\n    ws.current.onmessage = (e) => {\n      const event = JSON.parse(e.data)\n      if (event.Kind === \"enabled\") {\n        setEnabled(true)\n        setAnimated(true)\n        setSelected(null)\n      } else if (event.Kind === \"disabled\") {\n        setEnabled(false)\n        setAnimated(false)\n      } else if (event.Kind === \"reset\") {\n        setEnabled(false)\n        setAnimated(false)\n        setSelected(null)\n      }\n    }\n\n    ws.current.onclose = () => {\n      ws.current = null\n      setReloadWs(cur => !cur)\n    }\n  }, [sessionId, setAnimated, reloadWs])\n\n  return (\n    <div className=\"content\">\n      {choices.map((c, i) =>\n        <VoteButton\n          key={i}\n          choice={c}\n          name={name}\n          enabled={enabled}\n          selected={selected === c}\n          onClick={setSelected} />\n      )}\n    </div>)\n}\n\nconst VoteButton = ({ name, choice, enabled, selected, onClick }) => {\n  const { sessionId } = useParams()\n\n  const handleClick = (choice) => {\n    vote(sessionId, name, choice, () => onClick(choice))\n  }\n\n  return (\n    <Button\n      className={selected ? \"selected\": null}\n      text={choice}\n      disabled={!enabled}\n      onClick={() => handleClick(choice)} />\n    )\n}\n\nconst Vote = () => {\n  const [name, setName] = useState(null)\n  const { sessionId } = useParams()\n\n  const saveName = (name) => {\n    window.localStorage.setItem(\"name\", name)\n    setName(name)\n  }\n\n  if (name === null) {\n    const handleJoin = (name) => {\n      join(\n        sessionId,\n        name,\n        () => saveName(name),\n        () => saveName(name))\n    }\n\n    return (\n      <JoinForm\n        onClickJoin={handleJoin}\n        defaultValue={name || window.localStorage.getItem(\"name\") || \"\"} />)\n  } else {\n    return <Session name={name} />\n  }\n}\n\nexport default Vote","import { createContext, useState } from \"react\"\nimport { BrowserRouter as Router, Switch, Route, Link } from \"react-router-dom\"\n\nimport Home from \"./Home.jsx\"\nimport Control from \"./Control.jsx\"\nimport Vote from \"./Vote.jsx\"\n\nexport const LogoAnimationContext = createContext({})\n\nconst App = () => {\n  const [animated, setAnimated] = useState(false)\n\n  return (\n    <LogoAnimationContext.Provider value={{animated, setAnimated}}>\n      <div className=\"pajthy\">\n        <Router>\n          <Header animate={animated} />\n          <div className=\"countdown\"></div>\n          <Switch>\n            <Route exact path=\"/\">\n              <Home />\n            </Route>\n            <Route path=\"/:sessionId/control\">\n              <Control />\n            </Route>\n            <Route path=\"/:sessionId\">\n              <Vote />\n            </Route>\n          </Switch>\n        </Router>\n      </div>\n    </LogoAnimationContext.Provider>)\n}\n\nconst Header = ({ animate }) => {\n  const logoClasses = [\"logo\"]\n  if (animate) {\n    logoClasses.push(\"animate\")\n  }\n\n  return (\n    <header>\n      <div className={logoClasses.join(\" \")}></div>\n      <div className=\"title\">\n        <h1><Link to=\"/\">Pajthy</Link></h1>\n        <p className=\"subtitle\">easy voting for your remote scrum ceremonies</p>\n      </div>\n    </header>)\n}\n\nexport default App\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);"],"sourceRoot":""}